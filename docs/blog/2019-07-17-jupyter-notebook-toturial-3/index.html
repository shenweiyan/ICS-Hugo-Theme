<!DOCTYPE html>
<html lang="zh">
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons"> 
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css">
    <link rel="stylesheet" href="https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"> 
    <link rel="stylesheet" href="../../fonts/academicons-1.8.6/css/academicons.min.css"/>
    <link rel="icon" type="image/png" sizes="32x32" href="../../img/logo.png"> 
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    
    
    
    
    
    <title>数据科学工具 Jupyter Notebook 教程(三) - Steven Shen | 沈维燕</title> 
    <meta property="og:title" content="数据科学工具 Jupyter Notebook 教程(三) - Steven Shen | 沈维燕">
    

    
      
    

    

    
  
    <link rel="stylesheet" href="https://ivc.bioinit.com/css/style.css"/>
    <link rel="stylesheet" href="https://ivc.bioinit.com/css/fonts.css"/>
    <script async src="https://ivc.bioinit.com/js/load-typekit.js"></script>

<link rel="stylesheet" href="https://ivc.bioinit.com/css/template-styles.css" />
<link rel="stylesheet" href="https://ivc.bioinit.com/css/custom.css" />

  </head>

  
  <body class="blog">
    
    
    <header class="intro-and-nav" role="banner">
    <div>
      <div class="intro">
        <a class="logo" href="../../" aria-label="Steven Shen | 沈维燕 home page">
          <img src="https://ivc.bioinit.com/img/logo.png" alt="">
        </a>
        <p class="library-desc">
          
            Welcome to the personal website of Steven Shen.
          
        </p>
      </div>
      <nav id="patterns-nav" class="patterns" role="navigation">
        <h2 class="vh">Main navigation</h2>
        <button id="menu-button" aria-expanded="false">
          
          Menu
        </button>
        
        <ul id="patterns-list">
          
          <li class="pattern">
          
          
          
          
            <a href="../../" >
              
              首页
            </a>
          </li>
          
          <li class="pattern">
          
          
          
          
            <a href="../../about/" >
              
              关于
            </a>
          </li>
          
          <li class="pattern">
          
          
          
          
            <a href="../../blog/" >
              
              博客
            </a>
          </li>
          
          <li class="pattern">
          
          
          
          
            <a href="../../research/" >
              
              研究
            </a>
          </li>
          
          <li class="pattern">
          
          
          
          
            <a href="../../resume/shenweiyan" >
              
              简历
            </a>
          </li>
          
          <li class="pattern">
          
          
          
          
            <a href="../../tags/" >
              
              标签
            </a>
          </li>
          
          

<li class="pattern">&nbsp;&nbsp;</li>



<li class="pattern"><a href="https://github.com/shenweiyan/home/edit/master/content/blog/2019-07-17-jupyter-notebook-toturial-3.md" target="_blank">编辑</a></li>


<li class="pattern"><a href="../../blog/index.xml" type="application/rss+xml" title="RSS feed">订阅</a></li>

<li class="pattern"><a href="http://creativecommons.org/licenses/by-nc-sa/4.0/" title="Attribution-NonCommercial-ShareAlike 4.0 International">版权</a></li>


        </ul>
      </nav>
    </div>
    </header>

    <article class="main">
      <header class="title">
        

<h1>数据科学工具 Jupyter Notebook 教程(三)</h1>



<h3>
2019-07-17</h3> 


   
  


      </header>




<p><a name="df368884"></a></p>

<h2 id="前言">前言</h2>

<p>Jupyter Notebook 作为一个把代码、图像、注释、公式和作图集于一处，从而实现可读性分析的交互式笔记本工具，借助所谓的内核（Kernel）的概念，Jupyter Notebook 可以同时支持包括 python2、python3、R、Ruby 在内超过50多种不同编程环境。基于Kernel，Jupyter Notebook 可以支持的编程语言可以参考<a href="https://github.com/jupyter/jupyter/wiki/Jupyter-kernels">列表</a>。</p>

<p><a name="d994d598"></a></p>

<h2 id="目的">目的</h2>

<p>在 Jupyter Notebook 中实现 python2 与 python3 自由切换。</p>

<p><a name="52b36576"></a></p>

<h2 id="步骤">步骤</h2>

<p>参考：<a href="https://stackoverflow.com/questions/30492623/using-both-python-2-x-and-python-3-x-in-ipython-notebook">https://stackoverflow.com/questions/30492623/using-both-python-2-x-and-python-3-x-in-ipython-notebook</a></p>

<blockquote>
<p>The idea here is to install multiple <code>ipython</code> kernels. Here are instructions for anaconda. If you are not using anaconda, I recently added <a href="https://stackoverflow.com/a/34464003/2272172">instructions</a> using pure virtualenvs.</p>

<p><strong>Anaconda 4.1.0</strong></p>

<p>Since version 4.1.0, anaconda includes a special package <code>nb_conda_kernels</code> that detects conda environments with notebook kernels and automatically registers them. This makes using a new python version as easy as creating new conda environments:</p>
</blockquote>

<pre><code class="language-bash">conda create -n py27 python=2.7 ipykernel
conda create -n py36 python=3.6 ipykernel
</code></pre>

<blockquote>
<p>After a restart of jupyter notebook, the new kernels are available over the graphical interface. Please note that new packages have to be explicitly installed into the new enviroments. The Managing environments section in conda&rsquo;s docs provides further information.</p>

<p><strong>Manually registering kernels</strong></p>

<p>Users who do not want to use nb_conda_kernels or still use older versions of anaconda can use the following steps to manually register ipython kernels.</p>

<p>configure the <code>python2.7</code> environment:</p>
</blockquote>

<pre><code class="language-bash">conda create -n py27 python=2.7
source activate py27
conda install notebook ipykernel
ipython kernel install --user
</code></pre>

<blockquote>
<p>Additionally you can pass the <code>--name</code> and <code>--display-name</code> options to ipython kernel install if you want to change the names of your kernels. See <code>ipython kernel install --help</code> for more informations.</p>
</blockquote>

<p>总结起来就是：</p>

<ol>
<li>在 python2 和 python3 环境中分别安装 ipykernel。</li>
<li>手动为当前用户(&ndash;user)，或者指定路径(&ndash;prefix)安装 IPython kernel spec。</li>
</ol>

<p>需要注意的是：</p>

<ul>
<li>其中 <code>--user</code> 与 <code>--prefix</code> 不能同时使用。</li>
<li><code>--user</code> ，IPython kernel spec 默认安装到当前用户 <strong>~/.local/share/jupyter/kernels</strong> 或者 <strong>~/.ipython/kernels</strong>。</li>
<li>不加 <code>--user</code> 和 <code>--prefix</code> ，IPython kernel spec 默认安装到 <strong>/usr/local/share/jupyter/kernels</strong> 或者 <strong>/usr/share/jupyter/kernels</strong>。</li>
<li>IPython kernel spec 安装可以使用 <code>python -m ipykernel install</code> ，也可以使用 <code>ipython-kernel-install</code>  命令，两者是一样的。<br />
<img src="https://qiniu.bioinit.com/yuque/0/2019/png/126032/1563351954924-9deae7b8-600e-423f-9fce-497337ef6696.png#align=left&amp;display=inline&amp;height=388&amp;originHeight=388&amp;originWidth=626&amp;size=0&amp;status=done&amp;width=626" alt="" /></li>
</ul>

<p><a name="jvb8U"></a></p>

<h2 id="实战">实战</h2>

<p>使用 <code>--prefix</code> 指定 IPython kernel spec 安装路径：</p>

<pre><code># python2 环境（默认）
$ python -m pip install ipykernel
$ python -m ipykernel install --prefix=/Bio/Anaconda2.5/

# python3 环境
$ /Bio/Anaconda2.5/envs/python3/bin/python -m pip install ipykernel
$ /Bio/Anaconda2.5/envs/python3/bin/python -m ipykernel install --prefix=/Bio/Anaconda2.5/ --name &quot;python3&quot;
</code></pre>

<p>也可以使用 conda 进行安装：</p>

<pre><code># python2 环境（root）
conda install -n root ipykernel
python -m ipykernel install --prefix=/path/to/install --name &quot;python2&quot;

# python3 环境
conda install -n python3 ipykernel
/path/to/python3 -m ipykernel install --prefix=/path/to/install --name &quot;python3&quot;
</code></pre>

<p>最后，<code>jupyter-kernelspec list</code> 检查安装好的 kernels，启动 <code>jupyter notebook</code>。</p>

<pre><code>$ jupyter-kernelspec list
Available kernels:
  python2    /Bio/Anaconda2.5/share/jupyter/kernels/python2
  python3    /Bio/Anaconda2.5/share/jupyter/kernels/python3
</code></pre>

<p><img src="https://qiniu.bioinit.com/yuque/0/2019/png/126032/1563351954918-bad06ed0-2a67-494a-84a5-0a9e07a064be.png#align=left&amp;display=inline&amp;height=326&amp;originHeight=326&amp;originWidth=596&amp;size=0&amp;status=done&amp;width=596" alt="" /></p>

<ol>
<li>在 python2 和 python3 环境中分别安装 ipykernel。</li>
<li>手动为当前用户( <code>--user</code>  )，或者指定路径( <code>--prefix</code>  )安装 IPython kernel spec。其中 <code>--user</code> 与 <code>--prefix</code> 不能同时使用。</li>
<li>使用 <code>--user</code> 时，IPython kernel spec 默认安装到当前用户 <strong>~/.local/share/jupyter/kernels</strong> 或者 <strong>~/.ipython/kernels</strong>。</li>
<li>不加 <code>--user</code> 和 <code>--prefix</code> ，IPython kernel spec 默认安装到 <strong>/usr/local/share/jupyter/kernels</strong> 或者 <strong>/usr/share/jupyter/kernels</strong>。</li>
</ol>

<p>IPython kernel spec 安装可以使用 <code>python -m ipykernel install</code> ，也可以使用 <code>ipython-kernel-install</code> 命令，两者是一样的。</p>


  <footer>
  
<nav class="post-nav">
  <span class="nav-prev"><a href="../../blog/2019-07-17-jupyter-notebook-toturial-2/">数据科学工具 Jupyter Notebook 教程(二)</a><br/>&larr;</span>
  <span class="nav-next"><a href="../../blog/2019-07-19-ucig1a/">Linux 下的进程管理</a><br/>&rarr;</span>
</nav>
<script type="text/javascript">
document.addEventListener('keyup', function(e) {
  if (e.target.nodeName.toUpperCase() != 'BODY') return;
  var url = false;
  if (e.which == 37) {  
    
    url = '\/blog\/2019-07-17-jupyter-notebook-toturial-2\/';
    
  } else if (e.which == 39) {  
    
    url = '\/blog\/2019-07-19-ucig1a\/';
    
  }
  if (url) window.location = url;
});
</script>



<section class="comments">
  <div id="disqus_thread"></div>
  <script>
  var disqus_config = function () {
  
    this.page.url = "https:\/\/shenweiyan.github.io\/home\/" + location.pathname;
  
  };
  (function() {
    var inIFrame = function() {
      var iframe = true;
      try { iframe = window.self !== window.top; } catch (e) {}
      return iframe;
    };
    if (inIFrame()) return;
    var disqus_js = '//bioinit.disqus.com/embed.js';
    var d = document, s = d.createElement('script');
    s.src = disqus_js; s.async = true;
    s.setAttribute('data-timestamp', +new Date());
    var b = false, l = function() {
      if (b) return;
      (d.head || d.body).appendChild(s); b = true;
    }
    var t = d.getElementById('disqus_thread');
    s.onerror = function(e) {
      if (sessionStorage.getItem('failure-note')) return;
      t.innerText = '非常抱歉, 中国大陆地区读者需要翻墙才能发表评论。';
      t.style.border = '1px dashed';
      t.style.padding = '.5em';
      t.style.background = 'lightyellow';
      sessionStorage.setItem('failure-note', true);
    };
    
    if (location.hash.match(/^#comment/)) return l();
    var c = function() {
      if (b) return;
      var rect = t.getBoundingClientRect();
      if (rect.top < window.innerHeight && rect.bottom >= 0) l();
    };
    window.addEventListener('load', c);
    d.addEventListener('scroll', c);
  })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</section>




<script async src="../../js/fix-toc.js"></script>

<script async src="../../js/center-img.js"></script>

<script async src="../../js/right-quote.js"></script>

<script async src="../../js/no-highlight.js"></script>

<script async src="../../js/fix-footnote.js"></script>

<script async src="../../js/math-code.js"></script>

<script async src="../../js/external-link.js"></script>

<script async src="../../js/alt-title.js"></script>

<script async src="../../js/header-link.js"></script>

<script async src="../../js/dom-scripts.js"></script>


<script async src="//cdn.bootcss.com/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML"></script>



  
  
  
  

  <script type="text/javascript" src="//rf.revolvermaps.com/0/0/6.js?i=5m6pzaeh5ar&amp;m=0&amp;c=ff0000&amp;cr1=ffffff&amp;f=arial&amp;l=0&amp;bv=0" async="async"></script>
  </footer>
  </article>
  
  </body>
</html>

